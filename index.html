<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="./pages/index.css">
  <title>Mesto</title>
</head>

<body class="body">
  <header class="header">
    <div class="header__logo"></div>
  </header>

  <main class="content">
    <section class="profile">
      <div class="profile__data">
        <img src="./images/avatar.jpg" alt="Аватар" class="profile__avatar">
        <div class="profile__profile-info">
          <div class="profile__author-info">
            <h1 class="profile__title">Жак-Ив Кусто</h1>
            <button type="button" class="profile__edit-button">Редактировать</button>
          </div>
          <p class="profile__subtitle">Исследователь океана</p>
        </div>
      </div>
      <button type="button" class="profile__add-button">Добавить фото</button>
    </section>

    <section class="grid">
      <ul class="cards">
        <li class="card">
          <img src="./images/element-1.jpg" alt="Карачаевск" class="card__image">
          <div class="card__description">
            <h3 class="card__title">Карачаевск</h3>
            <button type="button" class="card__like-button">Нравиться</button>
          </div>
        </li>
      </ul>
    </section>
  </main>

  <div class="popup popup_type_profile">
    <div class="popup__container">
      <button class="popup__close-button" type="button">Закрыть</button>
      <form action="/" method="POST" class="form form_type_profile" name="edit-profile">
        <h2 class="form__title">Редактировать профиль</h2>
        <div class="form__field">
          <input type="text" value="Жак-Ив Кусто" placeholder="Ваше имя" class="form__input form__input_type_name"
            name="profile-name" id="profile-name" minlength="2" maxlength="40" required="">
          <span class="form__input-error profile-name-error"></span>
        </div>
        <div class="form__field">
          <input type="text" value="Исследователь океана" placeholder="Чем занимаетесь?"
            class="form__input form__input_type_job" name="profile-job" id="profile-job" minlength="2" maxlength="200"
            required="">
          <span class="form__input-error profile-job-error"></span>
        </div>
        <button type="submit" class="form__submit">Сохранить</button>
      </form>
    </div>
  </div>

  <div class="popup popup_type_photo">
    <div class="popup__container">
      <button class="popup__close-button" type="button">Закрыть</button>
      <form action="/" method="POST" class="form form_type_photo" name="add-photo">
        <h2 class="form__title">Новое место</h2>
        <div class="form__field">
          <input type="text" value="" placeholder="Название" class="form__input form__input_type_title"
            name="photo-title" id="photo-title" required="" minlength="2" maxlength="30">
          <span class="form__input-error photo-title-error"></span>
        </div>
        <div class="form__field">
          <input type="url" value="" placeholder="Ссылка на картинку" class="form__input form__input_type_src"
            name="photo-src" id="photo-src" required="">
          <span class="form__input-error photo-src-error"></span>
        </div>
        <button type="submit" class="form__submit form__submit_disabled" disabled="true">Создать</button>
      </form>
    </div>
  </div>

  <footer class="footer">
    <a class="footer__copyright">&copy; 2020 Mesto Russia</a>
  </footer>
  <script type="text/javascript">
    let editButton = document.querySelector('.profile__edit-button');
    let addButton = document.querySelector('.profile__add-button')
    let closeProfile = document.querySelector('.popup__close-button');
    let closePhoto = document.querySelector('.popup__close-button');
    let popupProfile = document.querySelector('.popup_type_profile');
    let popupPhoto = document.querySelector('.popup_type_photo');

    function openPopup(popupName) {
      popupName.classList.add('popup_opened');
      document.addEventListener('keydown', handleHotkey);
      document.addEventListener('mousedown', handleOverlayClick);
      console.log(`open ${popupName.classList[1]}`);
    }

    function closePopup(popupName) {
      popupName.classList.remove('popup_opened');
      document.removeEventListener('keydown', handleHotkey);
      document.removeEventListener('click', handleOverlayClick);
      console.log(`close ${popupName.classList[1]}`);
    }

    function handleHotkey(evt) {
      let activePopup = document.querySelector('.popup_opened');
      if (activePopup && evt.key === 'Escape') {
        closePopup(activePopup);
      }
    }

    function handleOverlayClick(evt) {
      let activePopup = document.querySelector('.popup_opened');
      if (activePopup && evt.target === activePopup) {
        closePopup(activePopup);
      }
    }

    closeProfile.addEventListener('click', () => { closePopup(popupProfile); });
    closePhoto.addEventListener('click', () => { closePopup(popupPhoto); });
    editButton.addEventListener('click', () => { openPopup(popupProfile) });
    addButton.addEventListener('click', () => { openPopup(popupPhoto) });


  </script>
  <!-- <script src="./scripts/index.js"></script> -->
</body>

</html>